<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="description" content="ELSER is a learned sparse ranking model trained by Elastic.">
<meta name="keywords" content="Elasticsearch, high watermark, low watermark, full disk">
<title>Explain Lifecycle API | Elasticsearch Guide [master] | Elastic</title>
<meta class="elastic" name="content" content="Explain Lifecycle API | Elasticsearch Guide [master]">

<link rel="home" href="index.html" title="Elasticsearch Guide [master]"/>
<link rel="up" href="data-lifecycle-management-api.html" title="Data Lifecycle Management APIs"/>
<link rel="prev" href="dlm-delete-lifecycle.html" title="Delete the lifecycle of a data stream"/>
<link rel="next" href="breaking-changes.html" title="Migration guide"/>
<meta class="elastic" name="product_version" content="master"/>
<meta class="elastic" name="product_name" content="Elasticsearch"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/master"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="master"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide [master]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="rest-apis.html">REST APIs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="data-lifecycle-management-api.html">Data Lifecycle Management APIs</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="dlm-delete-lifecycle.html">« Delete the lifecycle of a data stream</a>
</span>
<span class="next">
<a href="breaking-changes.html">Migration guide »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="dlm-explain-lifecycle"></a>Explain Lifecycle API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/dlm/apis/explain-data-lifecycle.asciidoc">edit</a></h2>
</div></div></div>

<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>This functionality is in technical preview and may be changed or removed in a future release. Elastic will apply best effort to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.</p>
</div>
</div>
<p>Retrieves the current data lifecycle status for one or more data stream backing indices.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="dlm-explain-lifecycle-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/dlm/apis/explain-data-lifecycle.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">GET &lt;target&gt;/_lifecycle/explain</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="dlm-explain-lifecycle-desc"></a>Description<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/dlm/apis/explain-data-lifecycle.asciidoc">edit</a></h3>
</div></div></div>
<p>Retrieves information about the index&#8217;s current DLM lifecycle state, such as
time since index creation, time since rollover, the lifecycle configuration
managing the index, or any error that Elasticsearch might&#8217;ve encountered during the lifecycle
execution.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="dlm-explain-lifecycle-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/dlm/apis/explain-data-lifecycle.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;target&gt;</code>
</span>
</dt>
<dd>
(Required, string) Comma-separated list of indices.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="dlm-explain-lifecycle-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/dlm/apis/explain-data-lifecycle.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">include_defaults</code>
</span>
</dt>
<dd>
(Optional, Boolean) Includes default configurations related to the lifecycle of the target index.
Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">master_timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code class="literal">30s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a response. If no response is received before the timeout
expires, the request fails and returns an error. Defaults to <code class="literal">30s</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="dlm-explain-lifecycle-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/dlm/apis/explain-data-lifecycle.asciidoc">edit</a></h3>
</div></div></div>
<p>The following example retrieves the lifecycle state of the index <code class="literal">.ds-metrics-2023.03.22-000001</code>:</p>
<a id="35be136ba9df7474a5521631e2a385b1"></a>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET .ds-metrics-2023.03.22-000001/_lifecycle/explain</pre>
</div>
<div class="console_widget" data-snippet="snippets/2959.console"></div>
<p>If the index is managed by DLM <code class="literal">explain</code> will show the <code class="literal">managed_by_dlm</code> field
set to <code class="literal">true</code> and the rest of the response will contain information about the
lifecycle execution status for this index:</p>
<a id="a8296c771c84a575a4ddc40d62b3814f"></a>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
  "indices": {
    ".ds-metrics-2023.03.22-000001": {
      "index" : ".ds-metrics-2023.03.22-000001",
      "managed_by_dlm" : true,                        <a id="CO782-1"></a><i class="conum" data-value="1"></i>
      "index_creation_date_millis" : 1679475563571,   <a id="CO782-2"></a><i class="conum" data-value="2"></i>
      "time_since_index_creation" : "843ms",          <a id="CO782-3"></a><i class="conum" data-value="3"></i>
      "rollover_date_millis" : 1679475564293,         <a id="CO782-4"></a><i class="conum" data-value="4"></i>
      "time_since_rollover" : "121ms",                <a id="CO782-5"></a><i class="conum" data-value="5"></i>
      "lifecycle" : { },                              <a id="CO782-6"></a><i class="conum" data-value="6"></i>
      "generation_time" : "121ms"                     <a id="CO782-7"></a><i class="conum" data-value="7"></i>
  }
}</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO782-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Shows if the index is being managed by DLM. If the index is not managed by
DLM the other fields will not be shown</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO782-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>When the index was created, this timestamp is used to determine when to
rollover</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO782-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>The time since the index creation (used for calculating when to rollover
the index via the <code class="literal">max_age</code>)</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO782-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>When the index was rolled over. If the index was not rolled over this will not be
shown.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO782-5"><i class="conum" data-value="5"></i></a></p>
</td>
<td align="left" valign="top">
<p>The time since rollover. If the index was not rolled over this will not be shown.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO782-6"><i class="conum" data-value="6"></i></a></p>
</td>
<td align="left" valign="top">
<p>The lifecycle configuration that applies to this index (which is configured on the parent
data stream)</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO782-7"><i class="conum" data-value="7"></i></a></p>
</td>
<td align="left" valign="top">
<p>The generation time of the index represents the time since the index started progressing
towards the user configurable / business specific parts of the lifecycle (e.g. retention).
Every index will have to wait for it to be rolled over before being able to progress to the
business-specific part of the lifecycle (i.e. the index advances in its lifecycle after it
stops being the write index of a data stream). If the index has not been rolled over the
<code class="literal">generation_time</code> will not be reported.</p>
</td>
</tr>
</table>
</div>
<p>The <code class="literal">explain</code> will also report any errors related to the lifecycle execution for the target
index:</p>
<a id="a80f3288d85692d01ac712d61bb503bf"></a>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
  "indices": {
    ".ds-metrics-2023.03.22-000001": {
      "index" : ".ds-metrics-2023.03.22-000001",
      "managed_by_dlm" : true,
      "index_creation_date_millis" : 1679475563571,
      "time_since_index_creation" : "843ms",
      "lifecycle" : { },
      "error": "{\"type\":\"validation_exception\",\"reason\":\"Validation Failed: 1: this action would add [2] shards, but this cluster
currently has [4]/[3] maximum normal shards open;\"}"        <a id="CO783-1"></a><i class="conum" data-value="1"></i>
  }
}</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO783-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The target index could not be rolled over due to a limitation in the number of shards
allowed in the cluster.</p>
</td>
</tr>
</table>
</div>
</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="dlm-delete-lifecycle.html">« Delete the lifecycle of a data stream</a>
</span>
<span class="next">
<a href="breaking-changes.html">Migration guide »</a>
</span>
</div>
</div>
</body>
</html>
